{"version":3,"file":"gundb-react-hooks.js","sources":["../src/index.ts"],"sourcesContent":["// @ts-ignore\nimport React, {\n  useState,\n  useEffect,\n  useReducer,\n  useRef,\n  useMemo,\n  useCallback,\n  useContext,\n  createContext,\n} from 'react';\n\nexport interface IGunChainReference<T = any> {\n  get(key: string): IGunChainReference<T>;\n  put(\n    data: T,\n    callback?: (ack: { err?: string; ok?: any }) => void,\n  ): IGunChainReference<T>;\n  on(\n    callback: (data: T, key: string, message?: any, event?: any) => void,\n  ): () => void;\n  once(callback: (data: T, key: string) => void): void;\n  set(\n    data: T,\n    callback?: (ack: { err?: string; ok?: any }) => void,\n  ): IGunChainReference<T>;\n  map(): IGunChainReference<T>;\n  open?(\n    callback: (data: T, key: string, message?: any, event?: any) => void,\n  ): void;\n  user(soul?: string): IGunUserReference;\n  off(): void;\n  toString(): string;\n}\n\nexport interface IGunUserReference extends IGunChainReference {\n  is: KeyPair | null;\n  auth(keypair: KeyPair, callback?: (ack: any) => void): void;\n  create(keypair: KeyPair, callback?: (ack: any) => void): void;\n  leave(): void;\n}\n\nexport interface GunError {\n  err: string;\n  code?: string | number;\n  context?: string;\n}\n\nexport type ValidGunData = string | number | boolean | object | null;\n\nexport type GunStatic = any;\nexport type GunRef = IGunChainReference | null;\nexport type NamespacedRef = IGunUserReference;\n\nexport type KeyPair = {\n  pub: string;\n  priv: string;\n  epub: string;\n  epriv: string;\n};\n\nexport type Storage = {\n  getItem: (key: string) => any;\n  setItem: (key: string, data: string) => any;\n  removeItem: (key: string) => any;\n};\n\nexport type AuthContextType = {\n  gun: IGunChainReference;\n  user: IGunUserReference;\n  login: (keys?: undefined | string | KeyPair) => void;\n  logout: (onLoggedOut?: () => void) => void;\n  sea: any;\n  appKeys: undefined | string | KeyPair;\n  isLoggedIn: boolean;\n  newGunInstance: (opts?: GunOptions) => IGunChainReference;\n};\n\nexport type AuthProviderOpts = {\n  Gun: any;\n  sea: any;\n  keyFieldName?: string;\n  storage: Storage;\n  gunOpts: GunOptions;\n  children: React.ReactNode;\n};\n\nexport type Options = {\n  appKeys?: undefined | string | KeyPair;\n  sea?: any;\n  interval?: number;\n  useOpen?: boolean;\n};\n\nexport type NodeData<T extends ValidGunData> = T & {\n  readonly nodeID: string;\n  readonly _?: { '#': string; '>': Record<string, number> };\n};\n\nexport type NodeT<T> = T & { nodeID: string; [key: string]: any };\n\nexport type ActionType<T> =\n  | { type: 'add'; data: NodeT<T> | NodeT<T>[] }\n  | { type: 'update'; data: NodeT<T> }\n  | { type: 'remove'; data: { nodeID: string } };\n\nexport type UpdateType = {\n  id: string;\n  data: any;\n};\n\nexport interface GunOptions\n  extends Partial<{\n    file: string;\n    web: any;\n    s3: {\n      key: any;\n      secret: any;\n      bucket: any;\n    };\n    peers: string[] | Record<string, {}>;\n    radisk: boolean;\n    localStorage: boolean;\n    uuid(): string;\n    [key: string]: any;\n  }> {}\n\nexport interface CollectionState<T> {\n  collection: Map<string, T>;\n  sorted?: T[];\n  infiniteScrolling?: {\n    isFetching: boolean;\n    lastFetched: string;\n    reverse: boolean;\n  };\n}\n\nexport interface UseGunStateReturn<T> {\n  fields: T;\n  put: (data: Partial<T>) => Promise<void>;\n  remove: (field: string) => Promise<void>;\n  error: GunError | null;\n  isLoading: boolean;\n  isConnected: boolean;\n}\n\nexport interface UseGunCollectionReturn<T> {\n  collection: Map<string, NodeT<T>>;\n  items: NodeT<T>[];\n  addToSet: (data: T, nodeID?: string) => Promise<void>;\n  updateInSet: (nodeID: string, data: Partial<T>) => Promise<void>;\n  removeFromSet: (nodeID: string) => Promise<void>;\n  error: GunError | null;\n  isLoading: boolean;\n  count: number;\n}\n\nexport interface PaginationOptions<T> extends Options {\n  pageSize?: number;\n  currentPage?: number;\n  sortBy?: keyof T | ((a: NodeT<T>, b: NodeT<T>) => number);\n  sortOrder?: 'asc' | 'desc';\n  filter?: (item: NodeT<T>) => boolean;\n  preloadPages?: number;\n}\n\nexport interface UsePaginatedCollectionReturn<T>\n  extends UseGunCollectionReturn<T> {\n  currentPage: number;\n  totalPages: number;\n  hasNextPage: boolean;\n  hasPrevPage: boolean;\n  pageSize: number;\n\n  nextPage: () => void;\n  prevPage: () => void;\n  goToPage: (page: number) => void;\n  setPageSize: (size: number) => void;\n\n  currentPageItems: NodeT<T>[];\n  currentPageCount: number;\n\n  isLoadingPage: boolean;\n  preloadedPages: Set<number>;\n}\n\nexport const encryptData = async (\n  data: any,\n  keys: undefined | string | KeyPair,\n  sea: any,\n) => {\n  try {\n    return keys && sea ? await sea.encrypt(data, keys) : data;\n  } catch (error) {\n    console.warn('Failed to encrypt data:', error);\n    return data;\n  }\n};\n\nexport const decryptData = async (\n  data: any,\n  keys: undefined | string | KeyPair,\n  sea: any,\n) => {\n  try {\n    return keys && sea ? await sea.decrypt(data, keys) : data;\n  } catch (error) {\n    console.warn('Failed to decrypt data:', error);\n    return data;\n  }\n};\n\nconst debounce = <T extends (...args: any[]) => any>(\n  func: T,\n  wait: number,\n): ((...args: Parameters<T>) => void) => {\n  let timeout: ReturnType<typeof setTimeout> | null = null;\n\n  return (...args: Parameters<T>) => {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => func(...args), wait);\n  };\n};\n\nconst validateNodeID = (nodeID: string): void => {\n  if (!nodeID || typeof nodeID !== 'string' || nodeID.trim().length === 0) {\n    throw new Error('Invalid nodeID: must be a non-empty string');\n  }\n};\n\nconst validateData = <T>(data: T, context: string): void => {\n  if (data === undefined) {\n    throw new Error(`Data cannot be undefined in ${context}`);\n  }\n};\n\nconst warnInDevelopment = (condition: boolean, message: string): void => {\n  if (typeof window !== 'undefined' && condition) {\n    console.warn(`[GunDB Hooks Warning] ${message}`);\n  }\n};\n\nexport const debouncedUpdates = (\n  dispatcher: any,\n  type = 'object',\n  timeout = 100,\n) => {\n  let updates: any[] = [];\n  let handler: any;\n\n  const updateFunction = (update: UpdateType) => {\n    updates.push(update);\n    if (!handler) {\n      handler = setTimeout(() => {\n        let newStateSlice = updates.reduce(\n          (previousState, { id, data }) => {\n            if (type === 'object') {\n              previousState[id] = data;\n            } else {\n              previousState.set(id, data);\n            }\n            return previousState;\n          },\n          type === 'object' ? {} : new Map(),\n        );\n        dispatcher(newStateSlice);\n        updates = [];\n        handler = null;\n      }, timeout);\n    }\n\n    return () => {\n      clearTimeout(handler);\n      updates = [];\n      handler = null;\n    };\n  };\n\n  updateFunction.cleanup = () => {\n    if (handler) {\n      clearTimeout(handler);\n      updates = [];\n      handler = null;\n    }\n  };\n\n  return updateFunction;\n};\n\nexport const useIsMounted = () => {\n  const isMounted = useRef(false);\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  return isMounted;\n};\n\nexport const nodeReducer = <T>(\n  state: NodeT<T>,\n  { data, type }: ActionType<T>,\n): T => {\n  switch (type) {\n    case 'add':\n      return { ...state, ...data };\n    case 'remove':\n      delete state[data.nodeID];\n      return { ...state };\n    default:\n      throw new Error();\n  }\n};\n\nexport const collectionReducer = <T>(\n  state: CollectionState<T>,\n  { data, type }: ActionType<T>,\n): CollectionState<T> => {\n  switch (type) {\n    case 'add':\n      const newCollectionForAdd = new Map(state.collection);\n      if (Array.isArray(data)) {\n        data.forEach((item: NodeT<T>) => {\n          newCollectionForAdd.set(item.nodeID, item);\n        });\n      } else {\n        newCollectionForAdd.set(data.nodeID, data);\n      }\n      return {\n        ...state,\n        collection: newCollectionForAdd,\n      };\n    case 'update':\n      if (!Array.isArray(data)) {\n        const newCollectionForUpdate = new Map(state.collection);\n        newCollectionForUpdate.set(data.nodeID, data);\n        return {\n          ...state,\n          collection: newCollectionForUpdate,\n        };\n      }\n      return state;\n    case 'remove':\n      const newCollectionForRemove = new Map(state.collection);\n      newCollectionForRemove.delete(data.nodeID);\n      return {\n        ...state,\n        collection: newCollectionForRemove,\n      };\n    default:\n      throw new Error(`Unknown action type: ${type}`);\n  }\n};\n\nexport const useSafeReducer = <T>(\n  reducer: any,\n  initialState: T,\n): [T, Function] => {\n  const [state, dispatch] = useReducer<React.Reducer<T, ActionType<T>>>(\n    reducer,\n    initialState,\n  );\n  const isMounted = useIsMounted();\n\n  function safeDispatch(args: ActionType<T>) {\n    if (isMounted.current) {\n      dispatch(args);\n    }\n  }\n\n  return [state, safeDispatch];\n};\n\nexport const useGun = (Gun: GunStatic, opts: GunOptions) => {\n  const [gun, setGun] = useState(Gun({ ...opts }));\n\n  useEffect(() => {\n    if (opts) {\n      setGun(Gun({ ...opts }));\n    }\n  }, [Gun, opts]);\n\n  return gun;\n};\n\nexport const useGunNamespace = (gun: GunRef, soul?: string) => {\n  const [namespace, setNamespace] = useState(\n    gun && soul ? gun.user(soul) : gun ? gun.user() : null,\n  );\n  useEffect(() => {\n    if (gun && !namespace) {\n      setNamespace(soul ? gun.user(soul) : gun.user());\n    }\n  }, [namespace, gun, soul]);\n  return namespace;\n};\n\nexport const useGunKeyAuth = (\n  gun: GunRef,\n  keys: KeyPair,\n  triggerAuth: boolean = true,\n) => {\n  // Will attempt to perform a login (when triggerAuth is set to true),\n  // or, if false, returns a namespaced gun node\n  const namespacedGraph = useGunNamespace(gun);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [error, setError] = useState<GunError | null>(null);\n\n  useEffect(() => {\n    if (!gun) return;\n\n    // @ts-ignore - Gun types are not properly defined\n    const off = gun.on('auth', () => {\n      setIsLoggedIn(true);\n      setError(null);\n    });\n\n    // Ensure we always return a function for cleanup\n    return () => {\n      if (typeof off === 'function') {\n        try {\n          off();\n        } catch (e) {}\n      } else if (typeof (gun as any).off === 'function') {\n        try {\n          (gun as any).off();\n        } catch (e) {}\n      }\n    };\n  }, [gun]);\n\n  useEffect(() => {\n    if (!keys || !triggerAuth) {\n      setIsLoggedIn(false);\n      setError(null);\n    }\n  }, [keys, triggerAuth]);\n\n  useEffect(() => {\n    if (namespacedGraph && namespacedGraph.is) {\n      setIsLoggedIn(true);\n    } else if (namespacedGraph && !namespacedGraph.is && isLoggedIn) {\n      setIsLoggedIn(false);\n    }\n  }, [namespacedGraph, isLoggedIn]);\n\n  useEffect(() => {\n    if (namespacedGraph && !namespacedGraph.is && keys && triggerAuth) {\n      try {\n        namespacedGraph.auth(keys, (ack: any) => {\n          if (ack.err) {\n            setError({\n              err: ack.err,\n              context: 'useGunKeyAuth.auth',\n            });\n          }\n        });\n      } catch (err) {\n        setError({\n          err: err instanceof Error ? err.message : 'Authentication failed',\n          context: 'useGunKeyAuth',\n        });\n      }\n    }\n  }, [triggerAuth, namespacedGraph, keys]);\n\n  return [namespacedGraph, isLoggedIn, error] as const;\n};\n\nexport const useGunKeys = (\n  sea: any,\n  existingKeys?: KeyPair | undefined | null,\n) => {\n  const [newKeys, setNewKeys] = useState<KeyPair | undefined | null>(\n    existingKeys,\n  );\n\n  useEffect(() => {\n    const getKeySet = async () => {\n      const pair: KeyPair = await sea.pair();\n      setNewKeys(pair);\n    };\n\n    if (!newKeys && !existingKeys) {\n      getKeySet().catch(console.error);\n    }\n\n    if (existingKeys) {\n      setNewKeys(existingKeys);\n    }\n  }, [existingKeys, newKeys, sea]);\n\n  return newKeys;\n};\n\nexport const useGunOnNodeUpdated = <T>(\n  ref: GunRef,\n  opts: Options = {\n    appKeys: '',\n    sea: null,\n    useOpen: false,\n  },\n  cb: (data: T, nodeID: string) => void,\n  cleanup?: () => void,\n) => {\n  const { appKeys, sea, useOpen } = opts;\n  const handler = useRef<(() => void) | null>(null);\n  const isMounted = useIsMounted();\n\n  useEffect(() => {\n    if (!ref || !isMounted.current) return;\n\n    const gunCb = async (\n      encryptedField: any,\n      nodeID: string,\n      message: any,\n      event: any,\n    ) => {\n      if (!isMounted.current) return;\n\n      try {\n        let decryptedField = await decryptData(encryptedField, appKeys, sea);\n        cb(decryptedField, nodeID);\n      } catch (error) {\n        console.warn('Failed to decrypt data in useGunOnNodeUpdated:', error);\n      }\n\n      if (!handler.current && event?.off) {\n        handler.current = () => event.off();\n      }\n    };\n\n    if (useOpen) {\n      if (!ref.open) {\n        throw new Error('Please include gun/lib/open.');\n      } else {\n        ref.open(gunCb);\n      }\n    } else {\n      ref.on(gunCb);\n    }\n\n    return () => {\n      if (handler.current) {\n        handler.current();\n        handler.current = null;\n      }\n      if (cleanup) {\n        cleanup();\n      }\n    };\n  }, [ref, appKeys, sea, useOpen, cb, cleanup, isMounted]);\n};\n\nexport const useGunState = <T>(\n  ref: GunRef,\n  opts: Options = {\n    appKeys: '',\n    sea: null,\n    interval: 100,\n    useOpen: false,\n  },\n): UseGunStateReturn<T> => {\n  const { appKeys, sea, interval = 100, useOpen } = opts;\n\n  // Memoize the options to prevent unnecessary re-renders\n  const memoizedOpts = useMemo(\n    () => ({\n      appKeys,\n      sea,\n      interval,\n      useOpen,\n    }),\n    [appKeys, sea, interval, useOpen],\n  );\n\n  const [fields, dispatch] = useSafeReducer<T>(nodeReducer, {} as T);\n  const [error, setError] = useState<GunError | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isConnected, setIsConnected] = useState(false);\n\n  const debouncedHandlers = useRef<Function[]>([]);\n  const isMounted = useIsMounted();\n\n  useEffect(() => {\n    warnInDevelopment(!ref, 'useGunState: ref is undefined');\n    warnInDevelopment(\n      !!(appKeys && !sea),\n      'useGunState: appKeys provided but no SEA instance',\n    );\n  }, [ref, appKeys, sea]);\n\n  const updater = useCallback(\n    debouncedUpdates(\n      (data: any) => {\n        if (isMounted.current) {\n          dispatch({ type: 'add', data });\n          setIsLoading(false);\n          setIsConnected(true);\n          setError(null);\n        }\n      },\n      'object',\n      interval,\n    ),\n    [interval, isMounted],\n  );\n\n  useEffect(() => {\n    const connectionTimeout = setTimeout(() => {\n      if (isLoading) {\n        setError({\n          err: 'Connection timeout - no data received',\n          context: 'useGunState connection',\n        });\n        setIsLoading(false);\n      }\n    }, 5000);\n\n    return () => clearTimeout(connectionTimeout);\n  }, [isLoading]);\n\n  const nodeUpdateCallback = useCallback(\n    (item: any) => {\n      try {\n        if (item && typeof item === 'object') {\n          Object.keys(item).forEach((key) => {\n            let cleanFn = updater({ id: key, data: item[key] });\n            debouncedHandlers.current.push(cleanFn);\n          });\n        }\n      } catch (err) {\n        setError({\n          err: err instanceof Error ? err.message : 'Unknown error',\n          context: 'useGunState data processing',\n        });\n      }\n    },\n    [updater],\n  );\n\n  const cleanupCallback = useCallback(() => {\n    if (debouncedHandlers.current.length) {\n      debouncedHandlers.current.forEach((c) => c());\n      debouncedHandlers.current = [];\n    }\n  }, []);\n\n  useGunOnNodeUpdated(ref, memoizedOpts, nodeUpdateCallback, cleanupCallback);\n\n  const put = useCallback(\n    async (data: Partial<T>): Promise<void> => {\n      if (!ref) {\n        throw new Error('useGunState: ref is undefined');\n      }\n\n      try {\n        validateData(data, 'useGunState.put');\n        setError(null);\n\n        let encryptedData = await encryptData(data, appKeys, sea);\n\n        await new Promise<void>((resolve, reject) =>\n          ref.put(encryptedData, (ack: any) => {\n            if (ack.err) {\n              const error: GunError = {\n                err: ack.err,\n                context: 'useGunState.put',\n              };\n              setError(error);\n              reject(error);\n            } else {\n              resolve();\n            }\n          }),\n        );\n      } catch (err) {\n        const error: GunError = {\n          err: err instanceof Error ? err.message : 'Unknown error',\n          context: 'useGunState.put',\n        };\n        setError(error);\n        throw error;\n      }\n    },\n    [ref, appKeys, sea],\n  );\n\n  const remove = useCallback(\n    async (field: string): Promise<void> => {\n      if (!ref) {\n        throw new Error('useGunState: ref is undefined');\n      }\n\n      try {\n        validateNodeID(field);\n        setError(null);\n\n        await new Promise<void>((resolve, reject) =>\n          ref.put(null, (ack: any) => {\n            if (ack.err) {\n              const error: GunError = {\n                err: ack.err,\n                context: 'useGunState.remove',\n              };\n              setError(error);\n              reject(error);\n            } else {\n              if (isMounted.current) {\n                dispatch({ type: 'remove', data: { nodeID: field } });\n              }\n              resolve();\n            }\n          }),\n        );\n      } catch (err) {\n        const error: GunError = {\n          err: err instanceof Error ? err.message : 'Unknown error',\n          context: 'useGunState.remove',\n        };\n        setError(error);\n        throw error;\n      }\n    },\n    [ref, isMounted],\n  );\n\n  return {\n    fields,\n    put,\n    remove,\n    error,\n    isLoading,\n    isConnected,\n  };\n};\n\nexport const useGunCollectionState = <T extends Record<string, any>>(\n  ref: GunRef,\n  opts: Options = {\n    appKeys: '',\n    sea: null,\n    interval: 100,\n    useOpen: false,\n  },\n): UseGunCollectionReturn<T> => {\n  const { appKeys, sea, interval = 100, useOpen } = opts;\n\n  const memoizedOpts = useMemo(\n    () => ({\n      appKeys,\n      sea,\n      interval,\n      useOpen,\n    }),\n    [appKeys, sea, interval, useOpen],\n  );\n\n  const [{ collection }, dispatch] = useSafeReducer<CollectionState<NodeT<T>>>(\n    collectionReducer,\n    {\n      collection: new Map(),\n    },\n  );\n\n  const [error, setError] = useState<GunError | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const debouncedHandlers = useRef<Function[]>([]);\n  const isMounted = useIsMounted();\n\n  const hasValidRef = Boolean(ref);\n\n  useEffect(() => {\n    warnInDevelopment(!ref, 'useGunCollectionState: ref is undefined');\n    warnInDevelopment(\n      !!(appKeys && !sea),\n      'useGunCollectionState: appKeys provided but no SEA instance',\n    );\n  }, [ref, appKeys, sea]);\n\n  useEffect(() => {\n    if (!hasValidRef) {\n      setIsLoading(false);\n    }\n  }, [hasValidRef]);\n\n  const updater = useCallback(\n    debouncedUpdates(\n      (dataMap: Map<string, NodeT<T>>) => {\n        if (isMounted.current) {\n          const items = Array.from(dataMap.values());\n          dispatch({ type: 'add', data: items });\n          setIsLoading(false);\n          setError(null);\n        }\n      },\n      'map',\n      interval,\n    ),\n    [interval, isMounted],\n  );\n\n  useEffect(() => {\n    const connectionTimeout = setTimeout(() => {\n      if (isLoading) {\n        setError({\n          err: 'Connection timeout - no data received',\n          context: 'useGunCollectionState connection',\n        });\n        setIsLoading(false);\n      }\n    }, 5000);\n\n    return () => clearTimeout(connectionTimeout);\n  }, [isLoading]);\n\n  const nodeUpdateCallback = useCallback(\n    (item: T, nodeID: string) => {\n      if (item && typeof item === 'object') {\n        try {\n          setError(null);\n          let cleanFn = updater({\n            id: nodeID,\n            data: { ...item, nodeID } as NodeT<T>,\n          });\n          debouncedHandlers.current.push(cleanFn);\n        } catch (err) {\n          setError({\n            err: err instanceof Error ? err.message : 'Unknown error',\n            context: 'useGunCollectionState data processing',\n          });\n        }\n      }\n    },\n    [updater],\n  );\n\n  const cleanupCallback = useCallback(() => {\n    if (debouncedHandlers.current.length) {\n      debouncedHandlers.current.forEach((c) => c());\n      debouncedHandlers.current = [];\n    }\n  }, []);\n\n  useGunOnNodeUpdated(\n    ref ? ref.map() : null,\n    memoizedOpts,\n    nodeUpdateCallback,\n    cleanupCallback,\n  );\n\n  const updateInSet = useCallback(\n    async (nodeID: string, data: Partial<T>): Promise<void> => {\n      if (!ref) {\n        throw new Error('useGunCollectionState: ref is undefined');\n      }\n\n      try {\n        validateNodeID(nodeID);\n        validateData(data, 'useGunCollectionState.updateInSet');\n        setError(null);\n\n        let encryptedData = await encryptData(data, appKeys, sea);\n        await new Promise<void>((resolve, reject) =>\n          ref.get(nodeID).put(encryptedData, (ack: any) => {\n            if (ack.err) {\n              const error: GunError = {\n                err: ack.err,\n                context: 'useGunCollectionState.updateInSet',\n              };\n              setError(error);\n              reject(error);\n            } else {\n              if (isMounted.current) {\n                dispatch({\n                  type: 'update',\n                  data: { nodeID, ...data } as NodeT<T>,\n                });\n              }\n              resolve();\n            }\n          }),\n        );\n      } catch (err) {\n        const error: GunError = {\n          err: err instanceof Error ? err.message : 'Unknown error',\n          context: 'useGunCollectionState.updateInSet',\n        };\n        setError(error);\n        throw error;\n      }\n    },\n    [ref, appKeys, sea, isMounted],\n  );\n\n  const addToSet = useCallback(\n    async (data: T, nodeID?: string): Promise<void> => {\n      if (!ref) {\n        throw new Error('useGunCollectionState: ref is undefined');\n      }\n\n      try {\n        validateData(data, 'useGunCollectionState.addToSet');\n        setError(null);\n\n        let encryptedData = await encryptData(data, appKeys, sea);\n\n        const promise = nodeID\n          ? new Promise<void>((resolve, reject) =>\n              ref\n                .get(nodeID)\n                .put(encryptedData, (ack: any) =>\n                  ack.err ? reject(new Error(ack.err)) : resolve(),\n                ),\n            )\n          : new Promise<void>((resolve, reject) =>\n              ref.set(encryptedData, (ack: any) =>\n                ack.err ? reject(new Error(ack.err)) : resolve(),\n              ),\n            );\n\n        await promise;\n      } catch (err) {\n        const error: GunError = {\n          err: err instanceof Error ? err.message : 'Unknown error',\n          context: 'useGunCollectionState.addToSet',\n        };\n        setError(error);\n        throw error;\n      }\n    },\n    [ref, appKeys, sea],\n  );\n\n  const removeFromSet = useCallback(\n    async (nodeID: string): Promise<void> => {\n      if (!ref) {\n        throw new Error('useGunCollectionState: ref is undefined');\n      }\n\n      try {\n        validateNodeID(nodeID);\n        setError(null);\n\n        await new Promise<void>((resolve, reject) =>\n          ref.get(nodeID).put(null, (ack: any) => {\n            if (ack.err) {\n              const error: GunError = {\n                err: ack.err,\n                context: 'useGunCollectionState.removeFromSet',\n              };\n              setError(error);\n              reject(error);\n            } else {\n              if (isMounted.current) {\n                dispatch({ type: 'remove', data: { nodeID } });\n              }\n              resolve();\n            }\n          }),\n        );\n      } catch (err) {\n        const error: GunError = {\n          err: err instanceof Error ? err.message : 'Unknown error',\n          context: 'useGunCollectionState.removeFromSet',\n        };\n        setError(error);\n        throw error;\n      }\n    },\n    [ref, isMounted],\n  );\n\n  const items = useMemo(() => Array.from(collection.values()), [collection]);\n  const count = useMemo(() => collection.size, [collection]);\n\n  return {\n    collection,\n    items,\n    addToSet,\n    updateInSet,\n    removeFromSet,\n    error,\n    isLoading,\n    count,\n  };\n};\n\nexport const useGunCollectionStatePaginated = <T extends Record<string, any>>(\n  ref: GunRef,\n  paginationOpts: PaginationOptions<T> = {},\n): UsePaginatedCollectionReturn<T> => {\n  const {\n    pageSize = 20,\n    sortBy,\n    sortOrder = 'asc',\n    filter,\n    preloadPages = 1,\n    currentPage: initialPage = 0,\n    appKeys = '',\n    sea = null,\n    interval = 100,\n    useOpen = false,\n  } = paginationOpts;\n\n  // Extract Options for the base collection hook - memoize to prevent infinite re-renders\n  const opts: Options = useMemo(\n    () => ({\n      appKeys,\n      sea,\n      interval,\n      useOpen,\n    }),\n    [appKeys, sea, interval, useOpen],\n  );\n\n  const [currentPage, setCurrentPage] = useState(initialPage);\n  const [currentPageItems, setCurrentPageItems] = useState<NodeT<T>[]>([]);\n  const [isLoadingPage, setIsLoadingPage] = useState(false);\n  const [totalItems, setTotalItems] = useState(0);\n\n  useEffect(() => {\n    setCurrentPage(initialPage);\n  }, [initialPage]);\n\n  const pageCache = useRef<Map<number, NodeT<T>[]>>(new Map());\n  const cacheTimestamps = useRef<Map<number, number>>(new Map());\n  const CACHE_TTL = 5 * 60 * 1000;\n\n  const baseCollection = useGunCollectionState<T>(ref, opts);\n\n  const getCachedPage = useCallback((page: number): NodeT<T>[] | null => {\n    const cached = pageCache.current.get(page);\n    const timestamp = cacheTimestamps.current.get(page);\n\n    if (cached && timestamp && Date.now() - timestamp < CACHE_TTL) {\n      return cached;\n    }\n    return null;\n  }, []);\n\n  const setCachedPage = useCallback((page: number, items: NodeT<T>[]) => {\n    pageCache.current.set(page, items);\n    cacheTimestamps.current.set(page, Date.now());\n  }, []);\n\n  const processedItems = useMemo(() => {\n    const allItems = Array.from(baseCollection.collection.values());\n\n    let filteredItems = filter ? allItems.filter(filter) : allItems;\n\n    if (sortBy) {\n      filteredItems = [...filteredItems].sort((a, b) => {\n        if (typeof sortBy === 'function') {\n          return sortOrder === 'asc' ? sortBy(a, b) : sortBy(b, a);\n        }\n        const aVal = a[sortBy];\n        const bVal = b[sortBy];\n        let comparison = 0;\n        if (aVal < bVal) comparison = -1;\n        else if (aVal > bVal) comparison = 1;\n        return sortOrder === 'asc' ? comparison : -comparison;\n      });\n    }\n\n    return filteredItems;\n  }, [baseCollection.collection, filter, sortBy, sortOrder]);\n\n  useEffect(() => {\n    setTotalItems(processedItems.length);\n    pageCache.current.clear();\n    cacheTimestamps.current.clear();\n  }, [processedItems]);\n\n  const loadPage = useCallback(\n    async (page: number) => {\n      if (page < 0) return;\n\n      setIsLoadingPage(true);\n\n      try {\n        const cached = getCachedPage(page);\n        if (cached) {\n          setCurrentPageItems(cached);\n          setIsLoadingPage(false);\n          return;\n        }\n\n        const startIndex = page * pageSize;\n        const endIndex = startIndex + pageSize;\n        const pageItems = processedItems.slice(startIndex, endIndex);\n\n        setCachedPage(page, pageItems);\n        setCurrentPageItems(pageItems);\n\n        for (let i = 1; i <= preloadPages; i++) {\n          const nextPage = page + i;\n          const prevPage = page - i;\n\n          setTimeout(() => {\n            if (\n              nextPage * pageSize < processedItems.length &&\n              !getCachedPage(nextPage)\n            ) {\n              const nextStartIndex = nextPage * pageSize;\n              const nextEndIndex = nextStartIndex + pageSize;\n              const nextPageItems = processedItems.slice(\n                nextStartIndex,\n                nextEndIndex,\n              );\n              setCachedPage(nextPage, nextPageItems);\n            }\n          }, 50 * i);\n\n          setTimeout(() => {\n            if (prevPage >= 0 && !getCachedPage(prevPage)) {\n              const prevStartIndex = prevPage * pageSize;\n              const prevEndIndex = prevStartIndex + pageSize;\n              const prevPageItems = processedItems.slice(\n                prevStartIndex,\n                prevEndIndex,\n              );\n              setCachedPage(prevPage, prevPageItems);\n            }\n          }, 50 * i);\n        }\n      } catch (error) {\n        console.error('Failed to load page:', error);\n      } finally {\n        setIsLoadingPage(false);\n      }\n    },\n    [pageSize, processedItems, preloadPages, getCachedPage, setCachedPage],\n  );\n\n  const totalPages = useMemo(\n    () => Math.ceil(totalItems / pageSize),\n    [totalItems, pageSize],\n  );\n  const hasNextPage = useMemo(\n    () => currentPage < totalPages - 1,\n    [currentPage, totalPages],\n  );\n  const hasPrevPage = useMemo(() => currentPage > 0, [currentPage]);\n\n  const nextPage = useCallback(() => {\n    if (hasNextPage) {\n      const newPage = currentPage + 1;\n      setCurrentPage(newPage);\n      loadPage(newPage);\n    }\n  }, [currentPage, hasNextPage, loadPage]);\n\n  const prevPage = useCallback(() => {\n    if (hasPrevPage) {\n      const newPage = currentPage - 1;\n      setCurrentPage(newPage);\n      loadPage(newPage);\n    }\n  }, [currentPage, hasPrevPage, loadPage]);\n\n  const goToPage = useCallback(\n    (page: number) => {\n      if (page >= 0 && page < totalPages) {\n        setCurrentPage(page);\n        loadPage(page);\n      }\n    },\n    [totalPages, loadPage],\n  );\n\n  const setNewPageSize = useCallback(\n    (size: number) => {\n      if (size <= 0) return;\n\n      const currentItemIndex = currentPage * pageSize;\n      const newPage = Math.floor(currentItemIndex / size);\n\n      setCurrentPage(newPage);\n      pageCache.current.clear();\n      cacheTimestamps.current.clear();\n      loadPage(newPage).catch(console.error);\n    },\n    [currentPage, pageSize, loadPage],\n  );\n\n  useEffect(() => {\n    if (totalPages > 0) {\n      if (currentPage >= totalPages) {\n        const newPage = Math.max(0, totalPages - 1);\n        setCurrentPage(newPage);\n        loadPage(newPage).catch(console.error);\n      } else {\n        loadPage(currentPage).catch(console.error);\n      }\n    } else if (processedItems.length > 0) {\n      loadPage(currentPage).catch(console.error);\n    }\n  }, [currentPage, totalPages, loadPage, processedItems.length]);\n\n  useEffect(() => {\n    if (processedItems.length > 0) {\n      loadPage(currentPage).catch(console.error);\n    }\n  }, [processedItems.length]);\n\n  const updatePageCache = useMemo(\n    () =>\n      debounce((updatedItem: NodeT<T>) => {\n        pageCache.current.forEach((page, pageNum) => {\n          const itemIndex = page.findIndex(\n            (item) => item.nodeID === updatedItem.nodeID,\n          );\n          if (itemIndex !== -1) {\n            page[itemIndex] = updatedItem;\n            if (pageNum === currentPage) {\n              setCurrentPageItems([...page]);\n            }\n          }\n        });\n      }, 100),\n    [currentPage],\n  );\n\n  useEffect(() => {\n    if (baseCollection.collection) {\n      Array.from(baseCollection.collection.values()).forEach((item) => {\n        updatePageCache(item);\n      });\n    }\n  }, [baseCollection.collection, updatePageCache]);\n\n  const preloadedPages = useMemo(\n    () => new Set(Array.from(pageCache.current.keys())),\n    [],\n  );\n\n  return {\n    ...baseCollection,\n    items: currentPageItems,\n    count: totalItems,\n    currentPage,\n    totalPages,\n    hasNextPage,\n    hasPrevPage,\n    pageSize,\n    nextPage,\n    prevPage,\n    goToPage,\n    setPageSize: setNewPageSize,\n    currentPageItems,\n    currentPageCount: currentPageItems.length,\n    isLoadingPage,\n    preloadedPages,\n  };\n};\n\nexport const AuthContext = createContext<AuthContextType | null>(null);\n\nexport const AuthProvider: React.FC<AuthProviderOpts> = ({\n  Gun,\n  sea,\n  keyFieldName = 'keys',\n  storage,\n  gunOpts,\n  children,\n}) => {\n  if (!sea || !Gun || !gunOpts) {\n    throw new Error('Provide gunOpts, Gun and sea');\n  }\n\n  const [{ isReadyToAuth, existingKeys, keyStatus }, setStatuses] = useState<{\n    isReadyToAuth: string;\n    existingKeys: KeyPair | null;\n    keyStatus: string;\n  }>({\n    isReadyToAuth: '',\n    existingKeys: null,\n    keyStatus: '',\n  });\n\n  const gun = useGun(Gun, gunOpts);\n  const newKeys = useGunKeys(sea);\n  const [user, isLoggedIn] = useGunKeyAuth(\n    gun,\n    existingKeys || undefined,\n    isReadyToAuth === 'ready',\n  );\n\n  useEffect(() => {\n    if (isLoggedIn && existingKeys && keyStatus === 'new') {\n      const storeKeysEffect = async () => {\n        try {\n          await storage.setItem(keyFieldName, JSON.stringify(existingKeys));\n        } catch (error) {\n          console.error('Failed to store keys:', error);\n        }\n      };\n\n      storeKeysEffect();\n    }\n  }, [isLoggedIn, existingKeys, keyFieldName, storage, keyStatus]);\n\n  useEffect(() => {\n    if (!existingKeys) {\n      const getKeys = async () => {\n        try {\n          const k = await storage.getItem(keyFieldName);\n          const ks = JSON.parse(k || 'null');\n          setStatuses({\n            isReadyToAuth: 'ready',\n            existingKeys: ks,\n            keyStatus: ks ? 'existing' : 'new',\n          });\n        } catch (error) {\n          console.warn('Failed to retrieve keys from storage:', error);\n          setStatuses({\n            isReadyToAuth: 'ready',\n            existingKeys: null,\n            keyStatus: 'new',\n          });\n        }\n      };\n      getKeys();\n    }\n  }, [storage, keyFieldName, existingKeys]);\n\n  const login = useCallback(\n    (keys?: undefined | string | KeyPair) => {\n      setStatuses({\n        isReadyToAuth: 'ready',\n        existingKeys: (keys as KeyPair) || newKeys || null,\n        keyStatus: 'new',\n      });\n    },\n    [setStatuses, newKeys],\n  );\n\n  const logout = useCallback(\n    (onLoggedOut?: () => void) => {\n      const removeKeys = async () => {\n        try {\n          // Call user.leave() first to properly logout from Gun\n          if (user && user.leave) {\n            user.leave();\n          }\n\n          // Remove keys from storage\n          await storage.removeItem(keyFieldName);\n\n          // Reset the authentication state\n          setStatuses({\n            isReadyToAuth: '',\n            existingKeys: null,\n            keyStatus: '',\n          });\n\n          // Call the callback if provided\n          if (onLoggedOut) {\n            onLoggedOut();\n          }\n        } catch (error) {\n          console.warn('Failed to remove keys from storage:', error);\n          // Still call the callback even if storage removal fails\n          if (onLoggedOut) {\n            onLoggedOut();\n          }\n        }\n      };\n      removeKeys();\n    },\n    [keyFieldName, storage, user],\n  );\n\n  const newGunInstance = useCallback(\n    (opts: GunOptions = gunOpts) => {\n      return Gun(opts);\n    },\n    [Gun, gunOpts],\n  );\n\n  const value = useMemo<AuthContextType>(\n    () => ({\n      gun,\n      user,\n      login,\n      logout,\n      sea,\n      appKeys: existingKeys || newKeys,\n      isLoggedIn,\n      newGunInstance,\n    }),\n    [\n      gun,\n      user,\n      login,\n      logout,\n      sea,\n      newKeys,\n      existingKeys,\n      isLoggedIn,\n      newGunInstance,\n    ],\n  );\n\n  return React.createElement(AuthContext.Provider, { value }, children);\n};\n\nexport const useAuth = (): AuthContextType => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\nexport const GunContext = createContext<IGunChainReference | null>(null);\n\nconst safeStringifyOptions = (options: GunOptions): string => {\n  try {\n    return JSON.stringify(options, (key, value) => {\n      // Skip circular references and functions\n      if (\n        typeof value === 'function' ||\n        (typeof value === 'object' &&\n          value !== null &&\n          value.constructor?.name?.includes('Gun'))\n      ) {\n        return '[Circular/Function]';\n      }\n      return value;\n    });\n  } catch (err) {\n    return String(Math.random());\n  }\n};\n\nexport const GunProvider: React.FC<{\n  gun: GunStatic;\n  options: GunOptions;\n  children: React.ReactNode;\n}> = ({ gun, options, children }) => {\n  const memoizedOptions = useMemo(\n    () => safeStringifyOptions(options),\n    [options],\n  );\n  const gunInstance = useMemo(() => {\n    try {\n      return gun(memoizedOptions);\n    } catch (err) {\n      console.error('Failed to initialize Gun instance:', err);\n      return null;\n    }\n  }, [gun, memoizedOptions]);\n\n  return React.createElement(\n    GunContext.Provider,\n    { value: gunInstance },\n    children,\n  );\n};\n\nexport const useGunContext = (): IGunChainReference => {\n  const context = useContext(GunContext);\n  if (!context) {\n    throw new Error('useGunContext must be used within a GunProvider');\n  }\n  return context;\n};\n\nexport const useGunDebug = (\n  ref: IGunChainReference | null,\n  label: string,\n  enabled: boolean = true,\n): void => {\n  useEffect(() => {\n    if (!enabled || !ref) return;\n\n    console.log(`[GunDB Debug - ${label}] Listening to:`, ref);\n\n    const off = ref.on((data, key) => {\n      console.log(`[${label}] Update:`, {\n        key,\n        data,\n        timestamp: new Date().toISOString(),\n      });\n    });\n\n    return () => {\n      if (typeof off === 'function') {\n        try {\n          off();\n        } catch (e) {}\n      } else if (typeof (ref as any).off === 'function') {\n        try {\n          (ref as any).off();\n        } catch (e) {}\n      }\n    };\n  }, [ref, label, enabled]);\n};\n\nexport const useGunConnection = (\n  ref: IGunChainReference,\n): {\n  isConnected: boolean;\n  lastSeen: Date | null;\n  error: GunError | null;\n} => {\n  const [isConnected, setIsConnected] = useState(false);\n  const [lastSeen, setLastSeen] = useState<Date | null>(null);\n  const [error, setError] = useState<GunError | null>(null);\n\n  useEffect(() => {\n    if (!ref) return;\n\n    let timeoutId: number;\n\n    const resetTimeout = () => {\n      clearTimeout(timeoutId);\n      timeoutId = window.setTimeout(() => {\n        setIsConnected(false);\n        setError({\n          err: 'Connection timeout',\n          context: 'useGunConnection',\n        });\n      }, 10000);\n    };\n\n    const off = ref.on(() => {\n      setIsConnected(true);\n      setLastSeen(new Date());\n      setError(null);\n      resetTimeout();\n    });\n\n    resetTimeout();\n\n    return () => {\n      clearTimeout(timeoutId);\n      if (typeof off === 'function') {\n        try {\n          off();\n        } catch (e) {}\n      } else if (typeof (ref as any).off === 'function') {\n        try {\n          (ref as any).off();\n        } catch (e) {}\n      }\n    };\n  }, [ref]);\n\n  return { isConnected, lastSeen, error };\n};\n"],"names":["_catch","body","recover","result","e","then","encryptData","data","keys","sea","Promise","resolve","encrypt","error","console","warn","reject","decryptData","decrypt","debounce","func","wait","timeout","_arguments","arguments","clearTimeout","setTimeout","apply","slice","call","validateNodeID","nodeID","trim","length","Error","validateData","context","undefined","warnInDevelopment","condition","message","window","debouncedUpdates","dispatcher","type","updates","handler","updateFunction","update","push","newStateSlice","reduce","previousState","_ref","id","set","Map","cleanup","useIsMounted","isMounted","useRef","useEffect","current","nodeReducer","state","_ref2","_extends","collectionReducer","_ref3","newCollectionForAdd","collection","Array","isArray","forEach","item","newCollectionForUpdate","newCollectionForRemove","useSafeReducer","reducer","initialState","_useReducer","useReducer","dispatch","safeDispatch","args","useGun","Gun","opts","_useState","useState","gun","setGun","useGunNamespace","soul","_useState2","user","namespace","setNamespace","useGunKeyAuth","triggerAuth","namespacedGraph","_useState3","isLoggedIn","setIsLoggedIn","_useState4","setError","off","on","is","auth","ack","err","useGunKeys","existingKeys","_useState5","newKeys","setNewKeys","getKeySet","pair","useGunOnNodeUpdated","ref","cb","appKeys","useOpen","_opts","gunCb","encryptedField","event","_temp2","_temp","decryptedField","open","useGunState","interval","_opts2","_opts2$interval","memoizedOpts","useMemo","_useSafeReducer","fields","_useState6","_useState7","isLoading","setIsLoading","_useState8","isConnected","setIsConnected","debouncedHandlers","updater","useCallback","connectionTimeout","nodeUpdateCallback","Object","key","cleanFn","cleanupCallback","c","put","encryptedData","remove","field","useGunCollectionState","_opts3","_opts3$interval","_useSafeReducer2","_useState9","_useState10","hasValidRef","Boolean","dataMap","items","from","values","map","updateInSet","get","addToSet","promise","removeFromSet","count","size","useGunCollectionStatePaginated","paginationOpts","_paginationOpts","_paginationOpts$pageS","pageSize","sortBy","_paginationOpts$sortO","sortOrder","filter","_paginationOpts$prelo","preloadPages","_paginationOpts$curre","currentPage","initialPage","_paginationOpts$appKe","_paginationOpts$sea","_paginationOpts$inter","_paginationOpts$useOp","_useState11","setCurrentPage","_useState12","currentPageItems","setCurrentPageItems","_useState13","isLoadingPage","setIsLoadingPage","_useState14","totalItems","setTotalItems","pageCache","cacheTimestamps","CACHE_TTL","baseCollection","getCachedPage","page","cached","timestamp","Date","now","setCachedPage","processedItems","allItems","filteredItems","concat","sort","a","b","aVal","bVal","comparison","clear","loadPage","startIndex","endIndex","pageItems","_loop","nextPage","i","prevPage","nextStartIndex","nextEndIndex","nextPageItems","prevStartIndex","prevEndIndex","prevPageItems","totalPages","Math","ceil","hasNextPage","hasPrevPage","newPage","goToPage","setNewPageSize","currentItemIndex","floor","max","updatePageCache","updatedItem","pageNum","itemIndex","findIndex","preloadedPages","Set","setPageSize","currentPageCount","AuthContext","createContext","AuthProvider","_ref4","_ref4$keyFieldName","keyFieldName","storage","gunOpts","children","_useState15","isReadyToAuth","keyStatus","_useState15$","setStatuses","_useGunKeyAuth","storeKeysEffect","_temp3","setItem","JSON","stringify","getKeys","_temp4","getItem","k","ks","parse","login","logout","onLoggedOut","removeKeys","_temp5","leave","removeItem","newGunInstance","value","React","createElement","Provider","useAuth","useContext","GunContext","safeStringifyOptions","options","_value$constructor","constructor","name","includes","String","random","GunProvider","_ref5","memoizedOptions","gunInstance","useGunContext","useGunDebug","label","enabled","log","toISOString","useGunConnection","_useState16","_useState17","lastSeen","setLastSeen","_useState18","timeoutId","resetTimeout"],"mappings":"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"}